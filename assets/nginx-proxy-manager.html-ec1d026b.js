import{_ as l,a as r,b as d}from"./3-834f457d.js";import{_ as c}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o,c as m,f as p,a,b as n,d as i,e}from"./app-2b6dfa07.js";const u={},v=e("<blockquote><p><em><strong>Deploying Static Web Pages with Nginx Proxy Manager</strong></em></p></blockquote><ul><li><p>搭建的 <em>web</em> 服务因使用了 <em><strong><s>宝塔面板</s></strong></em> 抽风不能 <em>CDN</em> ，导致访问失败，一气之下重装了系统，重新搭建了所有 <em>web</em>，并使用 <em>Nginx Proxy Manager</em> 管理 <em>web</em> 服务。</p></li><li><p>某些 <em>web</em> 服务需要在 <em>Nginx Proxy Manager</em> 的目录下构建，故在此记录下部署静态网页的流程备忘。</p></li></ul>",2),b=e(`<h2 id="搭建步骤" tabindex="-1"><a class="header-anchor" href="#搭建步骤" aria-hidden="true">#</a> 搭建步骤</h2><h3 id="一、安装-docker-及-docker-compose" tabindex="-1"><a class="header-anchor" href="#一、安装-docker-及-docker-compose" aria-hidden="true">#</a> 一、安装 <em>Docker</em> 及 <em>Docker-compose</em></h3><ul><li>安装 <em>Docker</em></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#更新、安装必备软件</span>

<span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token function">nano</span>

<span class="token comment">#安装docker：</span>

<span class="token function">curl</span> <span class="token parameter variable">-sSL</span> https://get.docker.com/ <span class="token operator">|</span> <span class="token function">sh</span>


<span class="token comment">#开机自动启动</span>

systemctl start <span class="token function">docker</span>

systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>安装 <em>Docker-compose</em></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/download/v2.22.0/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,6),h={id:"二、安装-nginx-proxy-manager-中文版",tabindex:"-1"},g=a("a",{class:"header-anchor",href:"#二、安装-nginx-proxy-manager-中文版","aria-hidden":"true"},"#",-1),k={href:"https://github.com/xiaoxinpro/nginx-proxy-manager-zh?utm_source=nginx-proxy-manager-zh",target:"_blank",rel:"noopener noreferrer"},x=a("em",null,"Nginx Proxy Manager",-1),_=e(`<ul><li>创建目录</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker_data/npm
<span class="token builtin class-name">cd</span> /data/docker_data/npm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>创建 <em>docker-compose.yml</em> 文件</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">nano</span> docker-compose.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>在文件中填入以下内容，然后 <em>Ctrl+X</em> 保存，按 <em>Y</em> 退出</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&#39;3&#39;</span>
services:
  app:
    image: <span class="token string">&#39;chishin/nginx-proxy-manager-zh:latest&#39;</span>
    restart: always
    ports:
      - <span class="token string">&#39;80:80&#39;</span>
      - <span class="token string">&#39;81:81&#39;</span>
      - <span class="token string">&#39;443:443&#39;</span>
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>创建完成后，运行</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>然后就可以通过 IP:81 来访问 <em>Nginx Proxy Manager</em> ，用初始账号密码登陆并修改。</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Email:     admin@example.com
Password:  changeme
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>反代 <em>Nginx Proxy Manager</em>，并添加 <em>SSL</em>。</li></ul><details><summary> View Screenshots </summary><p><img src="`+r+'" alt="1" title="反代 Nginx Proxy Manager" loading="lazy"><br><img src="'+d+`" alt="2" title="添加 SSL " loading="lazy"></p></details><h3 id="三、创建静态网站目录-添加内容并反代" tabindex="-1"><a class="header-anchor" href="#三、创建静态网站目录-添加内容并反代" aria-hidden="true">#</a> 三、创建静态网站目录，添加内容并反代</h3><ul><li>在挂载的 <em>data</em> 文件夹里面创建一个新的网站文件夹</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker_data/npm/data/sub.ven2s.cn
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>将带有html文件的内容放到这个文件夹里面</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 将/sub-web-modify/dist/文件夹下的所用文件移动到/data/docker_data/npm/data/sub.ven2s.cn/下</span>
<span class="token function">mv</span> ~/sub-web-modify/dist/* /data/docker_data/npm/data/sub.ven2s.cn/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,17),f={href:"http://sub.ven2s.cn",target:"_blank",rel:"noopener noreferrer"},y=a("em",null,"SSL",-1),N=a("figure",null,[a("img",{src:l,alt:"3",tabindex:"0",loading:"lazy"}),a("figcaption",null,"修改配置文件")],-1),w=e(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
    root /data/sub.ven2s.cn<span class="token punctuation">;</span>
    index index.html index.htm<span class="token punctuation">;</span>
    error_page <span class="token number">404</span> /index.html<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="大功告成" tabindex="-1"><a class="header-anchor" href="#大功告成" aria-hidden="true">#</a> 大功告成</h2>`,2);function P(S,M){const s=t("ExternalLinkIcon");return o(),m("div",null,[v,p(" more "),b,a("h3",h,[g,n(" 二、安装 "),a("a",k,[x,n(" 中文版"),i(s)])]),_,a("ul",null,[a("li",null,[a("p",null,[n("反代 "),a("em",null,[a("a",f,[n("sub.ven2s.cn"),i(s)])]),n(" 加 "),y,n("，并修改配置文件")]),N])]),w])}const V=c(u,[["render",P],["__file","nginx-proxy-manager.html.vue"]]);export{V as default};
